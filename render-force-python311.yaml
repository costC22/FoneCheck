services:
  - type: web
    name: fonecheck-force-python311
    env: python
    plan: free
    pythonVersion: 3.11
    buildCommand: |
      echo "ğŸš¨ FORÃ‡ANDO PYTHON 3.11 NO RENDER..."
      
      # Verificar versÃ£o atual
      echo "VersÃ£o atual:"
      python --version 2>/dev/null || echo "Python nÃ£o encontrado"
      
      # Instalar dependÃªncias do sistema
      echo "ğŸ“¦ Instalando dependÃªncias..."
      apt-get update -y
      apt-get install -y software-properties-common curl wget build-essential
      
      # Adicionar repositÃ³rio do Python
      echo "ğŸ”§ Adicionando repositÃ³rio Python..."
      add-apt-repository ppa:deadsnakes/ppa -y
      apt-get update -y
      
      # Instalar Python 3.11
      echo "ğŸ Instalando Python 3.11..."
      apt-get install -y python3.11 python3.11-venv python3.11-dev python3.11-distutils
      
      # Instalar pip para Python 3.11
      echo "ğŸ“¦ Instalando pip..."
      curl https://bootstrap.pypa.io/get-pip.py -o get-pip.py
      python3.11 get-pip.py
      
      # Criar links simbÃ³licos
      echo "ğŸ”— Criando links..."
      ln -sf /usr/bin/python3.11 /usr/local/bin/python
      ln -sf /usr/bin/python3.11 /usr/local/bin/python3
      
      # Verificar instalaÃ§Ã£o
      echo "âœ… Verificando:"
      python --version
      python3 --version
      
      # Atualizar pip
      python -m pip install --upgrade pip
      
      # Instalar setuptools e wheel
      python -m pip install --upgrade setuptools==68.2.2 wheel==0.41.2
      
      # Instalar dependÃªncias
      python -m pip install -r requirements-python311.txt
      
      echo "ğŸ‰ Build concluÃ­do com Python 3.11!"
    startCommand: gunicorn --bind 0.0.0.0:$PORT app:app
